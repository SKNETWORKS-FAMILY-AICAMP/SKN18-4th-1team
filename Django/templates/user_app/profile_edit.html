{% extends "layout/base.html" %}
{% load static %}

{% block title %}프로필 수정{% endblock %}

{% block content %}
<section class="mypage-wrapper profile-edit-wrapper">
    <div class="profile-card edit-card">
        <div class="section-header">
            <div>
                <p class="section-label">내 정보</p>
                <h2>프로필 수정</h2>
            </div>
        </div>

        {% if messages %}
        <div class="flash-messages">
            {% for message in messages %}
                {% if message.tags == 'success' and '로그아웃' not in message.message and '로그인' not in message.message %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}

        <form method="post" class="profile-edit-form">
            {% csrf_token %}

            {% if form.errors %}
            <div class="form-error-banner">
                {% for field in form %}
                    {% for error in field.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                {% endfor %}
            </div>
            {% endif %}

            <div class="form-grid">
                <div class="form-group">
                    <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
                    {{ form.name }}
                </div>
                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
                    {{ form.email }}
                </div>
                <div class="form-group">
                    <label for="{{ form.address.id_for_label }}">{{ form.address.label }}</label>
                    {{ form.address }}
                </div>
                <div class="form-group">
                    <label for="{{ form.height.id_for_label }}">{{ form.height.label }}</label>
                    {{ form.height }}
                </div>
                <div class="form-group">
                    <label for="{{ form.weight.id_for_label }}">{{ form.weight.label }}</label>
                    {{ form.weight }}
                </div>
                <div class="form-group">
                    <label for="{{ form.pregnancy.id_for_label }}">{{ form.pregnancy.label }}</label>
                    {{ form.pregnancy }}
                </div>
                <div class="form-group form-group-wide">
                    <label for="{{ form.disease_history.id_for_label }}">{{ form.disease_history.label }}</label>
                    {{ form.disease_history }}
                </div>
            </div>

            <div class="profile-actions form-actions">
                <button type="submit" class="pill-btn primary">저장</button>
                <a href="{% url 'accounts:account_profile' %}" class="pill-btn ghost">취소</a>
            </div>
        </form>
    </div>
</section>
{% endblock %}
